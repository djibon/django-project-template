function apply_form_field_error(e,t){var a=$("#id_"+e),o=$("#div_id_"+e),n=$("<span />").addClass("help-inline ajax-error").text(t[0]);o.addClass("error"),n.insertAfter(a)}function clear_form_field_errors(e){$(".ajax-error",$(e)).remove(),$(".error",$(e)).removeClass("error")}function django_message(e,t){var a={warning:"alert",error:"error",success:"success",info:"info"},o=$("#message_template").html(),n=Handlebars.compile(o),r={tags:a[t],message:e},i=n(r);$("#message_area").append(i)}function django_block_message(e,t){var a=$("#message_block_template").html(),o=Handlebars.compile(a),n={level:t,body:e},r=o(n);$("#message_area").append(r)}sum=function(e,t){for(var a=0,o=t+1;o;a+=e[--o][1]);return a},newsum=function(e){for(var t=0,a=e.length;a;t+=e[--a][1]);return t};var today=new Date,weekago=new Date(today.getTime()-6048e5),monthago=new Date(today.getTime()-2592e6);intros_last_week=Array(),intros_last_month=Array(),intros_all_time=Array(),_.each(INTRO_TOTALS.Intros_Made,function(e){1e3*e[0]>weekago.getTime()&&intros_last_week.push([1e3*e[0],e[1]])}),_.each(INTRO_TOTALS.Intros_Made,function(e){1e3*e[0]>monthago.getTime()&&intros_last_month.push([1e3*e[0],e[1]])}),_.each(INTRO_TOTALS.Intros_Made,function(e){intros_all_time.push([1e3*e[0],e[1]])}),received_last_week=Array(),received_last_month=Array(),received_all_time=Array(),_.each(INTRO_TOTALS.Intros_Received,function(e){1e3*e[0]>weekago.getTime()&&received_last_week.push([1e3*e[0],e[1]])}),_.each(INTRO_TOTALS.Intros_Received,function(e){1e3*e[0]>monthago.getTime()&&received_last_month.push([1e3*e[0],e[1]])}),_.each(INTRO_TOTALS.Intros_Received,function(e){received_all_time.push([1e3*e[0],e[1]])});var GRAPH_DATA=[{title:"Made",subtitle:"Last Week",headline:newsum(intros_last_week),selector_id:"intros-made-this-week",data:{label:"made",data:intros_last_week}},{title:"Received",subtitle:"Last Week",headline:newsum(received_last_week),selector_id:"intros-received-this-week",data:{label:"received",data:received_last_week}},{title:"Made",subtitle:"Last Month",headline:newsum(intros_last_month),selector_id:"intros-made-last-week",data:{label:"made",data:intros_last_month}},{title:"Received",subtitle:"Last Month",headline:newsum(received_last_month),selector_id:"intros-received-last-week",data:{label:"received",data:received_last_month}},{title:"Made",subtitle:"All Time",headline:newsum(intros_all_time),selector_id:"intros-made-all-time",data:{label:"made",data:intros_all_time}},{title:"Received",subtitle:"All Time",headline:newsum(received_all_time),selector_id:"intros-received-all-time",data:{label:"received",data:received_all_time}}];if($(document).ready(function(){var e='<h4>{{headline}}<span>{{title}}</span></h4><div class="bar-chart"></div><h3>{{subtitle}}</h3>',t={series:{stack:0,color:"#aed981",lines:{show:!0,steps:!1},bars:{show:!0,fill:!0,fillColor:"#aed981",barWidth:.9}},grid:{hoverable:!0,borderWidth:0,show:!0},tooltip:!0,tooltipOpts:{content:"%y %s on %x",xDateFormat:"%b %e"},legend:{show:!1},xaxis:{show:!0,color:"#ffffff",mode:"time"},yaxis:{show:!0,color:"#ffffff"}};_.each(GRAPH_DATA,function(a){var o=Mustache.to_html(e,a);document.getElementById(a.selector_id).innerHTML=o,$.plot($("#"+a.selector_id+" .bar-chart"),[a.data],t)})}),document.all&&!window.setTimeout.isPolyfill){var __nativeST__=window.setTimeout;window.setTimeout=function(e,t){var a=Array.prototype.slice.call(arguments,2);return __nativeST__(e instanceof Function?function(){e.apply(null,a)}:e,t)},window.setTimeout.isPolyfill=!0}if(document.all&&!window.setInterval.isPolyfill){var __nativeSI__=window.setInterval;window.setInterval=function(e,t){var a=Array.prototype.slice.call(arguments,2);return __nativeSI__(e instanceof Function?function(){e.apply(null,a)}:e,t)},window.setInterval.isPolyfill=!0}!function(e){"use strict";var t=function(){};t.prototype._ajax=function(t,a,o,n){t.trigger("eldarion-ajax:begin",[t]);var r=t.triggerHandler("eldarion-ajax:modify-data",n);r&&(n=r),e.ajax({url:a,type:o,dataType:"json",data:n,headers:{"X-Eldarion-Ajax":!0},statusCode:{200:function(e){e||(e={}),t.trigger("eldarion-ajax:success",[t,e])},500:function(){t.trigger("eldarion-ajax:error",[t,500])},400:function(){t.trigger("eldarion-ajax:error",[t,400])},404:function(){t.trigger("eldarion-ajax:error",[t,404])}},complete:function(a,o){e(document).trigger("eldarion-ajax:complete",[t,a,o])}})},t.prototype.click=function(a){var o=e(this),n=o.attr("href"),r=o.data("method"),i=o.data("data"),s=null,l=null;r||(r="get"),i&&(s={},i.split(",").map(function(t){l=t.split(":"),s[l[0]]=0===l[1].indexOf("#")?e(l[1]).val():l[1]})),a.preventDefault(),t.prototype._ajax(o,n,r,s)},t.prototype.submit=function(a){var o=e(this),n=o.attr("action"),r=o.attr("method"),i=o.serialize();a.preventDefault(),t.prototype._ajax(o,n,r,i)},t.prototype.cancel=function(t){var a=e(this),o=a.attr("data-cancel-closest");t.preventDefault(),a.closest(o).remove()},t.prototype.timeout=function(a,o){var n=e(o),r=n.data("timeout"),i=n.data("url"),s=n.data("method");s||(s="get"),window.setTimeout(t.prototype._ajax,r,n,i,s,null)},t.prototype.interval=function(a,o){var n=e(o),r=n.data("interval"),i=n.data("url"),s=n.data("method");s||(s="get"),window.setInterval(t.prototype._ajax,r,n,i,s,null)},e(function(){e("body").on("click","a.ajax",t.prototype.click),e("body").on("submit","form.ajax",t.prototype.submit),e("body").on("click","a[data-cancel-closest]",t.prototype.cancel),e("[data-timeout]").each(t.prototype.timeout),e("[data-interval]").each(t.prototype.interval)})}(window.jQuery),function(e){"use strict";var t=function(){};t.prototype.redirect=function(e,t,a){return a.location?(window.location.href=a.location,!1):void 0},t.prototype.replace=function(t,a,o){e(a.data("replace")).replaceWith(o.html)},t.prototype.replaceClosest=function(e,t,a){t.closest(t.data("replace-closest")).replaceWith(a.html)},t.prototype.replaceInner=function(t,a,o){e(a.data("replace-inner")).html(o.html)},t.prototype.replaceClosestInner=function(e,t,a){t.closest(t.data("replace-closest-inner")).html(a.html)},t.prototype.append=function(t,a,o){e(a.data("append")).append(o.html)},t.prototype.prepend=function(t,a,o){e(a.data("prepend")).prepend(o.html)},t.prototype.refresh=function(t,a){e.each(e(a.data("refresh")),function(t,a){e.getJSON(e(a).data("refresh-url"),function(t){e(a).replaceWith(t.html)})})},t.prototype.refreshClosest=function(t,a){e.each(e(a.data("refresh-closest")),function(t,o){e.getJSON(e(o).data("refresh-url"),function(t){a.closest(e(o)).replaceWith(t.html)})})},t.prototype.clear=function(t,a){e(a.data("clear")).html("")},t.prototype.remove=function(t,a){e(a.data("remove")).remove()},t.prototype.clearClosest=function(e,t){t.closest(t.data("clear-closest")).html("")},t.prototype.removeClosest=function(e,t){t.closest(t.data("remove-closest")).remove()},t.prototype.fragments=function(t,a,o){o.fragments&&e.each(o.fragments,function(t,a){e(t).replaceWith(a)}),o["inner-fragments"]&&e.each(o["inner-fragments"],function(t,a){e(t).html(a)}),o["append-fragments"]&&e.each(o["append-fragments"],function(t,a){e(t).append(a)}),o["prepend-fragments"]&&e.each(o["prepend-fragments"],function(t,a){e(t).prepend(a)})},e(function(){e(document).on("eldarion-ajax:success",t.prototype.redirect),e(document).on("eldarion-ajax:success",t.prototype.fragments),e(document).on("eldarion-ajax:success","[data-replace]",t.prototype.replace),e(document).on("eldarion-ajax:success","[data-replace-closest]",t.prototype.replaceClosest),e(document).on("eldarion-ajax:success","[data-replace-inner]",t.prototype.replaceInner),e(document).on("eldarion-ajax:success","[data-replace-closest-inner]",t.prototype.replaceClosestInner),e(document).on("eldarion-ajax:success","[data-append]",t.prototype.append),e(document).on("eldarion-ajax:success","[data-prepend]",t.prototype.prepend),e(document).on("eldarion-ajax:success","[data-refresh]",t.prototype.refresh),e(document).on("eldarion-ajax:success","[data-refresh-closest]",t.prototype.refreshClosest),e(document).on("eldarion-ajax:success","[data-clear]",t.prototype.clear),e(document).on("eldarion-ajax:success","[data-remove]",t.prototype.remove),e(document).on("eldarion-ajax:success","[data-clear-closest]",t.prototype.clearClosest),e(document).on("eldarion-ajax:success","[data-remove-closest]",t.prototype.removeClosest)})}(window.jQuery),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$(document).on("submit","form.ajaxy",function(e){e.preventDefault();{var t=$(this),a=t.attr("action");$.ajax({url:a,type:"POST",data:t.serializeObject(),success:function(){console.log("saved successfully.","success"),$("#add_introducee_modal").foundation("reveal","close")},error:function(e){var t=$.parseJSON(e.responseText);$.each(t,function(e,t){"__all__"===e?console.log(t[0],"error"):console.log(e,t)})}})}}),$(document).on("click","a.addintroducee",function(e){e.preventDefault();var t=$(this);$("input#intro_sequence").val(t.attr("data-introduction-sequence")),$("#add_introducee_modal").foundation("reveal","open")});